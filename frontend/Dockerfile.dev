# 前端开发环境 Dockerfile
FROM node:20-alpine

WORKDIR /app

# 安装 yarn
RUN corepack enable && corepack prepare yarn@stable --activate

# 复制 package 文件
COPY package.json ./

# 复制 yarn.lock（如果存在）
COPY yarn.lock* ./

# 安装依赖（如果有 yarn.lock 则使用 --frozen-lockfile）
RUN if [ -f yarn.lock ]; then yarn install --frozen-lockfile; else yarn install; fi

# 复制配置文件
COPY vite.config.ts tsconfig.json tsconfig.node.json postcss.config.js tailwind.config.js ./
COPY index.html ./

# 暴露端口
EXPOSE 3000

# 启动开发服务器（热重载）
CMD ["yarn", "dev", "--host", "0.0.0.0"]

